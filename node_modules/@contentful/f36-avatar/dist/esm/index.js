import p, { forwardRef } from 'react';
import { cx, css } from 'emotion';
import { Image } from '@contentful/f36-image';
import { Tooltip } from '@contentful/f36-tooltip';
import s from '@contentful/f36-tokens';
import { Stack } from '@contentful/f36-core';
import { Menu } from '@contentful/f36-menu';

var D=Object.defineProperty,H=Object.defineProperties;var X=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var T=(t,o,r)=>o in t?D(t,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[o]=r,h=(t,o)=>{for(var r in o||(o={}))$.call(o,r)&&T(t,r,o[r]);if(S)for(var r of S(o))G.call(o,r)&&T(t,r,o[r]);return t},N=(t,o)=>H(t,X(o));var V=(t,o)=>{var r={};for(var e in t)$.call(t,e)&&o.indexOf(e)<0&&(r[e]=t[e]);if(t!=null&&S)for(var e of S(t))o.indexOf(e)<0&&G.call(t,e)&&(r[e]=t[e]);return r};var I={primary:s.blue500,muted:z(s.gray500),green:s.green400,orange:s.orange400,yellow:s.yellow500,purple:s.purple400,gray:s.gray400,pink:"#FF77AE",emerald:"#00B8A2",lavender:"#9095FF"};function z(t){let o=parseInt(t.slice(1,3),16),r=parseInt(t.slice(3,5),16),e=parseInt(t.slice(5,7),16);return `rgb(${[Math.round((255+o)/2),Math.round((255+r)/2),Math.round((255+e)/2)].join(" ")})`}var _=t=>{let o=I[t],r=["muted","gray"].includes(t)?1:2;return {boxShadow:[`0px 0px 0px ${r}px ${o} inset`,`0px 0px 0px ${r+1}px ${s.colorWhite} inset`].join(", ")}},g=t=>({tiny:"20px",small:"24px",medium:"32px",large:"48px"})[t],O=t=>Math.round(Number(t.replace("px",""))/2),W=({size:t,variant:o,colorVariant:r})=>{let e=o==="app"?s.borderRadiusSmall:"100%",i=g(t),a=r==="muted";return {fallback:css({backgroundColor:a?z(s.gray300):s.gray300,color:a?z(s.gray700):s.gray700,height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontStretch:"semi-condensed",fontSize:`${O(i)}px`}),image:css({borderRadius:e,display:"block"}),root:css({borderRadius:e,height:i,overflow:"hidden",position:"relative",width:i,"&::after":h({borderRadius:e,bottom:0,content:'""',display:"block",left:0,position:"absolute",top:0,right:0},_(r))}),imageContainer:css({backgroundColor:s.colorWhite,overflow:"visible",zIndex:1},r==="muted"&&{img:{opacity:.5}}),overlayIcon:css({svg:{backgroundColor:s.colorWhite,borderRadius:"100%",position:"absolute",bottom:0,right:"-10%",width:"40%",height:"40%",zIndex:1}})}};function Q(u,l){var C=u,{alt:t="",className:o,colorVariant:r="gray",icon:e,isLoading:i=!1,size:a="medium",initials:f,src:n,testId:d="cf-ui-avatar",tooltipProps:v,variant:k="user"}=C,x=V(C,["alt","className","colorVariant","icon","isLoading","size","initials","src","testId","tooltipProps","variant"]);let j=!i&&!n,y=W({size:a,variant:k,colorVariant:r}),w=g(a),E=p.createElement("div",h({className:cx(y.root,o,{[y.imageContainer]:!!n}),"data-test-id":d,ref:l},x),j?p.createElement("div",{className:y.fallback,"data-test-id":`${d}-fallback`},f==null?void 0:f.substring(0,2).toUpperCase()):p.createElement(Image,{alt:t,className:y.image,height:w,src:n,width:w}),!!e&&p.createElement("span",{className:y.overlayIcon},e));return v?p.createElement(Tooltip,N(h({},v),{usePortal:!0}),E):E}var F=forwardRef(Q);var L=t=>({groupSpaced:css({gap:s.spacing2Xs}),groupStacked:css({gap:0,"> :not(:first-child)":{marginLeft:`-${s.spacing2Xs}`}}),avatarStacked:css({position:"relative",boxShadow:`0px 0px 0px 1px ${s.colorWhite}`}),moreAvatarsBtn:css({cursor:"pointer",backgroundColor:s.colorWhite,color:s.gray600,fontSize:s.fontSizeS,border:"none",boxShadow:`0px 0px 0px 1px ${s.gray200} inset`,borderRadius:"99999999em",height:g(t),width:g(t),overflow:"hidden",zIndex:0}),moreAvatarsItem:css({cursor:"default"})});function tt({children:t,className:o,maxVisibleChildren:r=3,size:e="medium",testId:i="cf-ui-avatar-group",variant:a="spaced"},f){let n=L(e),d=p.Children.toArray(t),v=d.length>r?r-1:r,k=d.slice(0,v),x=d.slice(v);return p.createElement(Stack,{flexDirection:"row",testId:i,ref:f,className:cx(o,{[n.groupStacked]:a==="stacked",[n.groupSpaced]:a==="spaced"})},k.map((l,u)=>{let C=k.length-u;return p.cloneElement(l,{key:`avatar-rendered-${u}`,size:e,className:cx(l.props.className,{[n.avatarStacked]:a==="stacked"}),style:{zIndex:C}})}),x.length>0&&p.createElement(Menu,{placement:"bottom-end"},p.createElement(Menu.Trigger,null,p.createElement("button",{type:"button",className:cx({[n.avatarStacked]:a==="stacked"},n.moreAvatarsBtn)},"+",x.length)),p.createElement(Menu.List,null,x.map((l,u)=>p.createElement(Menu.Item,{className:n.moreAvatarsItem,key:`avatar-${u}`},p.cloneElement(l,{key:`avatar-menuitem-${u}`,size:"tiny",tooltipProps:void 0}),l.props.alt)))))}var B=forwardRef(tt);

export { F as Avatar, B as AvatarGroup, I as avatarColorMap };
//# sourceMappingURL=out.js.map
//# sourceMappingURL=index.js.map